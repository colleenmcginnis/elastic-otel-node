////
Goal of this doc:
The user is able to successfully see data from their Node application make it to the Elastic UI via the Elastic Distribution for OpenTelemetry Node.js

Assumptions we're comfortable making about the reader:
* They are familiar with Elastic
* They are sending data to Elastic
* They have Node and NPM installed
////

[[get-started]]
== Get started

:language: Node.js
:distro_name: Elastic Distribution for OpenTelemetry {language}

include::release-status.asciidoc[]

This guide shows you how to use the Elastic Distribution for OpenTelemetry {language} ("the distro")
to instrument your {language} application and send OpenTelemetry data to an Elastic Observability deployment.

This doc will guide you through the minimal configuration options to get the Elastic distro set up in your application.
You do _not_ need any existing experience with OpenTelemetry to set up the Elastic distro initially.

[NOTE]
====
As an OpenTelemetry SDK, the distro supports sending data to any OpenTelemetry protocol (OTLP) endpoint (https://opentelemetry.io/docs/collector/[OpenTelemetry Collector]), but this guide assumes you are sending data to Elastic.
====

////
✅ What the user needs to know and/or do before they install the distro
////
[discrete]
[[get-started-prerequisites]]
=== Prerequisites

Before getting started, you'll need somewhere to send the gathered OpenTelemetry data, so it can be viewed and analyzed. This doc assumes you're using an https://www.elastic.co/observability[Elastic Observability] cloud deployment. You can use an existing one or set up a new one.

[[elastic-observability-setup]]
[%collapsible]
.*Expand for setup instructions*
====
This section shows how to create an https://www.elastic.co/observability[Elastic Observability] cloud deployment and get the data you need to configure the distro to send data to it.

. Register at https://cloud.elastic.co/registration[cloud.elastic.co], if you haven't already. This supports starting **free trial**.
. After registering, click *Create deployment* at `<https://cloud.elastic.co/home>`.
. Once that is created, click *Open* to visit your Kibana home page, e.g. `https://{DEPLOYMENT_NAME}.kb.{REGION}.cloud.es.io/app/home#/getting_started`.
====

////
✅ How to install the distro
////
[discrete]
[[get-started-install]]
=== Install

////
✅ Step-by-step instructions
////
Install the `@elastic/opentelemetry-node` package:

[source,sh]
----
npm install --save @elastic/opentelemetry-node
----

The distro is a single package that includes all the OpenTelemetry JS packages
that are needed for most cases.

// TODO: refer to advanced section of "start the SDK" when we have that doc.

////
✅ Start-to-finish operation
////
[discrete]
[[get-started-send-data]]
=== Send data to Elastic

After installing the distro, configure and initialize it to start
sending data to Elastic.

////
✅ Provide _minimal_ configuration/setup
////
[discrete]
[[get-started-configure]]
==== Configure the distro

////
✅ Step-by-step instructions
////
To configure the distro, at a minimum you'll need your Elastic Observability cloud deployment's OTLP endpoint and
authorization data to set the appropriate `OTLP_*` environment variables:

include::configure.asciidoc[tag=minimal-options]

include::configure.asciidoc[tag=get-auth]

image::img/otlp-endpoint-settings.png[Kibana's APM tutorial showing OTel settings]

For more information on all the available configuration options, refer to <<configure>>.

////
✅ Start sending data to Elastic
////
[discrete]
[[get-started-initialization]]
==== Initialize the distro

For the distro to automatically instrument modules used by your Node.js service,
it must be started before you `require` your service code's dependencies --
for example, before `express` or `http` are loaded.

////
✅ Step-by-step instructions
////
The recommended way to get the
distro started is by using the `-r, --require` Node.js
https://nodejs.org/api/cli.html#-r---require-module[CLI option]:

[source,sh]
----
node --require @elastic/opentelemetry-node my-service.js
----

The distro will automatically instrument popular modules (listed in <<supported-technologies>>)
used by your service, and send traces, metrics, and logs telemetry data (using
OTLP) to your configured observability backend.

// TODO: link to a reference section on other ways to start the distro once we have those docs.

////
✅ What success looks like
////
[discrete]
[[get-started-confirm]]
=== Confirm the distro is working

To confirm that the distro has successfully connected to Elastic:

. Go to *APM* → *Traces*.
. You should see the name of the service to which you just added the distro.
It can take several minutes after initializing the distro for the service to show up in this list.
. Click on the name in the list to see trace data.
+
NOTE: There may be no trace data to visualize unless you have _used_ your application since
initializing the distro.

[TIP]
====
Alternatively, if you are able to see the stdout from your service, you can look for an "INFO" level
log message, `start Elastic Distribution for OpenTelemetry Node.js`, at startup to confirm that the
distro is up and running.
====

////
✅ What they should do next
////
[discrete]
[[get-started-next-steps]]
=== Next steps

* Learn how to configure the distro and browse all <<configure,configuration options>>.
// TODO: Link to a more specific OpenTelemetry <-> Elastic Observability doc if/when it exists
* Learn more about viewing and interpreting APM data in the {observability-guide}/apm.html[Observability guide].
* Have a question? Start a discussion thread on the https://discuss.elastic.co/tags/c/observability/apm/58/nodejs[Elastic Discuss forum].
// TODO: Link to advanced usage when we have that doc

:!language:
:!distro_name:
